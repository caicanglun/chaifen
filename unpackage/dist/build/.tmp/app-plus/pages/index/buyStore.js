(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/buyStore"],{"1c94":function(e,t,n){},"20cf":function(e,t,n){"use strict";(function(e){n("d106");a(n("66fd"));var t=a(n("a5af"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"20dc":function(e,t,n){"use strict";n.r(t);var a=n("c68c"),r=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},"37ec":function(e,t,n){"use strict";var a=n("1c94"),r=n.n(a);r.a},a5af:function(e,t,n){"use strict";n.r(t);var a=n("b309"),r=n("20dc");for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("37ec");var c,u=n("f0c5"),s=Object(u["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],c);t["default"]=s.exports},b309:function(e,t,n){"use strict";var a,r=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}))},c68c:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("4795"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a,r,i,c){try{var u=e[i](c),s=u.value}catch(o){return void n(o)}u.done?t(s):Promise.resolve(s).then(a,r)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function u(e){c(i,a,r,u,s,"next",e)}function s(e){c(i,a,r,u,s,"throw",e)}u(void 0)}))}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){n.e("components/popupMessage").then(function(){return resolve(n("4dd7"))}.bind(null,n)).catch(n.oe)},l={components:{popupMessage:o},data:function(){var e;return e={type:1,price:"",record:[],isActive:!0,level:[],selectIndex:-1},s(e,"record",[]),s(e,"sliceIndex",1),s(e,"sliceArr",[{id:1,name:"靜態認購"},{id:2,name:"動態認購"}]),s(e,"userDetail",""),s(e,"storeRate",0),s(e,"pageNum",1),s(e,"pageSize",20),s(e,"flowType","认购"),s(e,"content",""),e},onLoad:function(){this.fetchPrice(),this.fetchList(),this.fetchList11(),this.fetchUserDetail()},methods:{showDialog:function(e){var t=this;this.type=e;var n="";this.level.forEach((function(e){e.id==t.selectIndex&&(n=e.label)})),1==e?this.content="確認認購".concat(n):2==e?this.content="確認靜態復投".concat(n):3==e&&(this.content="確認動態復投".concat(n)),this.$refs.dialog.show()},confirmInput:function(t){e("log","jowfewf"," at pages/index/buyStore.vue:136"),1==t?this.buyStore():2==t?this.buyStore():3==t&&this.dynicRenew()},fetchChaifen:function(){var t=this;return u(r.default.mark((function n(){var a,i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.get("/user/stock_flow");case 2:a=n.sent,i=a.data.data.list,i.forEach((function(e){t.$set(e,"details","配送"),t.$set(e,"usde",e.stockCount),e.createTime=t.handleDate(e.createTime)})),t.record=i,e("log",a," at pages/index/buyStore.vue:158");case 7:case"end":return n.stop()}}),n)})))()},dynicRenew:function(){var e=this;return u(r.default.mark((function t(){var n;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-1!=e.selectIndex){t.next=3;break}return a.showToast({title:"請選擇購買等級",icon:"none"}),t.abrupt("return");case 3:return n={level:e.selectIndex},a.showLoading({title:"提交中",mask:!0}),t.next=7,e.$http.get("/dm/anew",{data:n});case 7:t.sent,a.hideLoading(),a.showToast({title:"复投成功",duration:2e3});case 10:case"end":return t.stop()}}),t)})))()},fetchPrice:function(){var t=this;return u(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.get("/st/unit_price");case 2:a=n.sent,t.price=a.data.data.msg,e("log",a," at pages/index/buyStore.vue:193");case 5:case"end":return n.stop()}}),n)})))()},fetchList11:function(){var t=this;return u(r.default.mark((function n(){var a,i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={pageNum:t.pageNum,pageSize:t.pageSize,flowType:t.flowType},n.next=3,t.$http.get("/user/flow",{data:a});case 3:i=n.sent,t.record=i.data.data.list,t.record.forEach((function(e){e.details="初始源",e.usde=-e.usde/2,e.createTime=t.handleDate(e.createTime)})),e("log",i," at pages/index/buyStore.vue:209");case 7:case"end":return n.stop()}}),n)})))()},fetchListDynic:function(){var t=this;return u(r.default.mark((function n(){var a,i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={pageNum:t.pageNum,pageSize:t.pageSize,flowType:t.flowType},n.next=3,t.$http.get("/user/flow",{data:a});case 3:i=n.sent,t.record=i.data.data.list,t.record.forEach((function(e){e.details="进行中",e.usde=-e.usde,e.createTime=t.handleDate(e.createTime)})),e("log",i," at pages/index/buyStore.vue:225");case 7:case"end":return n.stop()}}),n)})))()},handleDate:function(e){var t=e.split(" "),n=t[0].split("-"),a=t[1].split(":");return n[1]+"-"+n[2]+" "+a[0]+":"+a[1]},fetchUserDetail:function(){var t=this;return u(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.get("/user/details");case 2:a=n.sent,e("log",a," at pages/index/buyStore.vue:236"),t.userDetail=a.data.data,t.userDetail.staticUserStatus>0&&(t.isActive=!1);case 6:case"end":return n.stop()}}),n)})))()},buyStore:function(){var e=this;return u(r.default.mark((function t(){var n;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-1!=e.selectIndex){t.next=3;break}return a.showToast({title:"請選擇購買等級",icon:"none"}),t.abrupt("return");case 3:return n={level:e.selectIndex},a.showLoading({title:"提交中",mask:!0}),t.next=7,e.$http.get("/st/share_subscription",{data:n});case 7:t.sent,a.hideLoading(),a.showToast({title:"认购成功",duration:1e3}),setTimeout((function(){a.navigateBack({delta:-1})}),2e3);case 11:case"end":return t.stop()}}),t)})))()},fetchList:function(){var t=this;return u(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.get("/basicdata/user_level");case 2:a=n.sent,t.level=a.data.data.list,e("log",a," at pages/index/buyStore.vue:274");case 5:case"end":return n.stop()}}),n)})))()},selectItem:function(e){e.canSelect?(this.selectIndex=e.id,this.storeRate=e.id/2):a.showToast({title:e.hint,icon:"none"})},tapSlice:function(e){this.sliceIndex=e,1==e?this.fetchList11():this.fetchListDynic()}}};t.default=l}).call(this,n("0de9")["default"],n("6e42")["default"])}},[["20cf","common/runtime","common/vendor"]]]);
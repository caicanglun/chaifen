(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/usdfDeal/orderRecord"],{"3de7":function(e,t,n){},"4a26":function(e,t,n){"use strict";var a,i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.items,(function(t,n){var a=e._f("returnStatus")(t.dealStatus),i=e._f("returnNumber")(t.usdtUnitPrice*t.usde);return{$orig:e.__get_orig(t),f0:a,f1:i}})));e.$mp.data=Object.assign({},{$root:{l0:n}})},r=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}))},b35c:function(e,t,n){"use strict";var a=n("3de7"),i=n.n(a);i.a},bea0:function(e,t,n){"use strict";(function(e){n("d106");a(n("66fd"));var t=a(n("eabd"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},d963:function(e,t,n){"use strict";n.r(t);var a=n("f8ab"),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t["default"]=i.a},eabd:function(e,t,n){"use strict";n.r(t);var a=n("4a26"),i=n("d963");for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("b35c");var u,o=n("f0c5"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);t["default"]=s.exports},f8ab:function(e,t,n){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("4795"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,a,i,r,u){try{var o=e[r](u),s=o.value}catch(c){return void n(c)}o.done?t(s):Promise.resolve(s).then(a,i)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function o(e){u(r,a,i,o,s,"next",e)}function s(e){u(r,a,i,o,s,"throw",e)}o(void 0)}))}}var s,c,d=function(){n.e("components/uni-load-more/uni-load-more").then(function(){return resolve(n("d7d9"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/popupMessage").then(function(){return resolve(n("4dd7"))}.bind(null,n)).catch(n.oe)},l={components:{uniLoadMore:d,popupMessage:f},filters:{returnNumber:function(e){return e.toFixed(4)},returnStatus:function(e){return 0==e?"等待交易":1==e?"已上傳憑證":2==e?"已完成":3==e?"已取消":void 0}},data:function(){return{loadingType:"more",dataIndex:1,pageNum:1,pageSize:20,items:[],userDetail:"",isFinish:0,content:"",dealCode:""}},onReachBottom:function(){null!=c&&clearTimeout(c),c=setTimeout((function(){s.fetchList()}),1e3)},onLoad:function(){s=this,this.fetchList()},methods:{toCopy:function(t){e.setClipboardData({data:t})},showDialog:function(e){this.dealCode=e,this.content="確認已到賬，要完成這個交易嗎？",this.$refs.dialog.show()},confirmInput:function(e){this.finishOrder()},fetchList:function(){var e=this;return o(i.default.mark((function t(){var n,r;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=e.loadingType){t.next=2;break}return t.abrupt("return");case 2:return n={isFinish:e.isFinish,pageNum:e.pageNum,pageSize:e.pageSize},t.next=5,e.$http.get("/udeal/udeal_list",{data:n});case 5:r=t.sent,r.data.data.isLastPage?e.loadingType="":e.pageSize+=20,e.items=r.data.data.list,a("log",r," at pages/usdfDeal/orderRecord.vue:143");case 9:case"end":return t.stop()}}),t)})))()},showPicture:function(t){e.previewImage({urls:[t],success:function(){a("log","正在预览中"," at pages/usdfDeal/orderRecord.vue:149")}})},finishOrder:function(){var t=this;return o(i.default.mark((function n(){var a;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={dealCode:t.dealCode},e.showLoading({title:"提交中",mask:!0}),n.next=4,t.$http.get("/udeal/finish",{data:a});case 4:n.sent,e.hideLoading(),e.showToast({title:"訂單已完成",duration:1500}),t.dataIndex=2,t.fetchList();case 9:case"end":return n.stop()}}),n)})))()},uploadPZ:function(t){var n=this;e.chooseImage({count:1,sizeType:["compressed"],success:function(r){var u=r.tempFilePaths;s.pictures="",e.uploadFile({url:"http://test.144f.com:8080/sl-web/basicdata/upload",filePath:u[0],name:"file",success:function(){var r=o(i.default.mark((function r(u){var o,c;return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a("log",u," at pages/usdfDeal/orderRecord.vue:184"),s.pictures=JSON.parse(u.data).data.msg,e.showToast({title:"上传成功",icon:"none",duration:1e3}),o={dealCode:t,proof:s.pictures},i.next=6,n.$http.get("/udeal/upload_proof",{data:o});case 6:c=i.sent,a("log",c," at pages/usdfDeal/orderRecord.vue:196"),n.fetchList();case 9:case"end":return i.stop()}}),r)})));function u(e){return r.apply(this,arguments)}return u}()})}})},selectLabel:function(e){this.dataIndex=e.target.dataset.index,this.pageSize=20,this.loadingType="more",2==this.dataIndex&&(this.isFinish=1,this.fetchList()),1==this.dataIndex&&(this.isFinish=0,this.fetchList())}}};t.default=l}).call(this,n("6e42")["default"],n("0de9")["default"])}},[["bea0","common/runtime","common/vendor"]]]);
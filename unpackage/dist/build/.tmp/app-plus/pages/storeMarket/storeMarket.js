(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/storeMarket/storeMarket"],{"3e16":function(t,e,a){},"69c2":function(t,e,a){"use strict";var n=a("3e16"),r=a.n(n);r.a},"72eb":function(t,e,a){"use strict";var n,r=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}))},"85dd":function(t,e,a){"use strict";a.r(e);var n=a("72eb"),r=a("a6ed");for(var o in r)"default"!==o&&function(t){a.d(e,t,(function(){return r[t]}))}(o);a("69c2");var i,u=a("f0c5"),c=Object(u["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);e["default"]=c.exports},a6ed:function(t,e,a){"use strict";a.r(e);var n=a("e1e6"),r=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},e1e6:function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(a("4795")),o=i(a("499e"));function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e,a,n,r,o,i){try{var u=t[o](i),c=u.value}catch(s){return void a(s)}u.done?e(c):Promise.resolve(c).then(n,r)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var o=t.apply(e,a);function i(t){u(o,n,r,i,c,"next",t)}function c(t){u(o,n,r,i,c,"throw",t)}i(void 0)}))}}var s,l,d=function(){a.e("components/uni-load-more/uni-load-more").then(function(){return resolve(a("d7d9"))}.bind(null,a)).catch(a.oe)},f=null,h={components:{uniLoadMore:d},data:function(){return{buyStop:!1,loadingType:"more",sellStop:!1,records:[],dataIndex:1,cWidth:"",cHeight:"",pixelRatio:1,serverData:"",chartData:{categories:[],series:[{name:"",data:[]}]},pageNum:1,pageSize:20}},onReachBottom:function(){null!=l&&clearTimeout(l),l=setTimeout((function(){s.fetchBuy()}),1e3)},onShow:function(){this.fetchPrice(),this.fetchBuy()},onLoad:function(){s=this,this.cWidth=t.upx2px(750),this.cHeight=t.upx2px(400),this.fetchPrice(),setTimeout((function(){s.showColumn("canvasColumn",s.chartData)}),500),this.fetchPrice(),this.fetchBuy()},methods:{fetchPrice:function(){var t=this;return c(r.default.mark((function e(){var a,o,i;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/st/share_price");case 2:a=e.sent,t.chartData.categories=a.data.data.categories,o=a.data.data.data,i=[],o.forEach((function(t,e){e%2==0?i.push({value:t,color:"#586da4"}):i.push({value:t,color:"#2b3c68"})})),t.chartData.series[0].data=i,n("log",t.chartData," at pages/storeMarket/storeMarket.vue:133"),n("log",a," at pages/storeMarket/storeMarket.vue:134");case 10:case"end":return e.stop()}}),e)})))()},fetchBuy:function(){var t=this;return c(r.default.mark((function e(){var a,o;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.loadingType="")){e.next=2;break}return e.abrupt("return");case 2:return a={pageNum:t.pageNum,pageSize:t.pageSize},t.loadingType="loading",e.next=6,t.$http.get("/st/queue_buy_list",{data:a});case 6:o=e.sent,o.data.data.totalCount<t.pageSize?t.loadingType="":(t.loadingType="more",t.pageSize+=20),t.records=o.data.data.list,n("log",o," at pages/storeMarket/storeMarket.vue:154");case 10:case"end":return e.stop()}}),e)})))()},fetchSell:function(){var t=this;return c(r.default.mark((function e(){var a,o;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.sellStop){e.next=2;break}return e.abrupt("return");case 2:return a={pageNum:t.pageNum,pageSize:t.pageSize},e.next=5,t.$http.get("/st/queue_sell_list",{data:a});case 5:o=e.sent,o.data.data.totalCount<t.pageSize?t.sellStop=!0:t.pageSize+=20,t.records=o.data.data.list,n("log",o," at pages/storeMarket/storeMarket.vue:172");case 9:case"end":return e.stop()}}),e)})))()},toMyorder:function(){t.navigateTo({url:"./myOrder"})},selectLabel:function(t){this.dataIndex=t.target.dataset.index,2==this.dataIndex&&(this.buyStop=!1,this.pageSize=20,this.fetchSell()),1==this.dataIndex&&(this.pageSize=20,this.sellStop=!1,this.fetchBuy())},getServerData:function(){t.request({url:"https://www.ucharts.cn/data.json",data:{},success:function(t){n("log",t," at pages/storeMarket/storeMarket.vue:201"),s.serverData=t.data.data;var e={categories:[],series:[]};e.categories=t.data.data.Column.categories,e.series=t.data.data.Column.series,s.showColumn("canvasColumn",e)},fail:function(){s.tips="网络错误，小程序端请检查合法域名"}})},showColumn:function(t,e){f=new o.default({$this:s,canvasId:t,type:"column",legend:{show:!1},fontSize:11,background:"#111c30",pixelRatio:s.pixelRatio,animation:!0,categories:e.categories,series:e.series,enableScroll:!0,xAxis:{gridColor:"#586da4",gridType:"dash",labelCount:4,itemCount:20,scrollShow:!0,scrollAlign:"left",scrollBackgroundColor:"#111c30",scrollColor:"#2b3c68"},yAxis:{gridColor:"#586da4",data:[{format:function(t){return t.toFixed(2)}}]},dataLabel:!1,width:s.cWidth*s.pixelRatio,height:s.cHeight*s.pixelRatio,extra:{column:{type:"group",width:10}}})},touchLineA:function(t){f.scrollStart(t),f.showToolTip(t,{format:function(t,e){return"object"===typeof t.data?e+" "+t.name+":"+t.data.value:e+" "+t.name+":"+t.data}})},moveLineA:function(t){f.scroll(t)},touchEndLineA:function(t){f.scrollEnd(t)}}};e.default=h}).call(this,a("6e42")["default"],a("0de9")["default"])},e8a6:function(t,e,a){"use strict";(function(t){a("d106");n(a("66fd"));var e=n(a("85dd"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])}},[["e8a6","common/runtime","common/vendor"]]]);